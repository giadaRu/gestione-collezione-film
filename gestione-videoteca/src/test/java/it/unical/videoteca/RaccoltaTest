package it.unical.videoteca.domain.collection;

import org.junit.jupiter.api.Test;
import it.unical.videoteca.domain.*;

public class RaccoltaTest {

    @Test
    void testAggiornaRaccolte() {
        VideotecaFacade facade = new VideotecaFacade();

        facade.aggiungiFilm(new FilmDTO("F1", "Inception", "Nolan", 2010, "Fantascienza", 5.0, StatoVisione.VISTO));
        facade.aggiungiFilm(new FilmDTO("F2", "Tenet", "Nolan", 2020, "Fantascienza", 4.5, StatoVisione.IN_VISIONE));

        facade.creaRaccolta("R1", "Preferiti Nolan", "Film personali");
        facade.aggiungiFilmARaccolta("R1", "F1");
        facade.aggiungiFilmARaccolta("R1", "F2");

        if (facade.filmDellaRaccolta("R1").size() != 2)
            throw new RuntimeException("Errore");

        facade.rimuoviFilm("F1"); //deve notificare e aggiornare

        if (facade.filmDellaRaccolta("R1").size() != 1)
            throw new RuntimeException("Observer non ha aggiornato la raccolta");

        System.out.println("RaccoltaTest: la sincronizzazione automatica funziona correttamente");
    }
}
